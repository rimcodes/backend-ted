"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[501],{5501:(J,g,r)=>{r.r(g),r.d(g,{PostsModule:()=>S});var u=r(6895),n=r(433),l=r(8635),v=r(5963),t=r(8274),m=r(5625),d=r(262),b=r(2843),y=r(2340),Z=r(529);let h=(()=>{class o{constructor(e){this.http=e,this.postApi=y.N.apiUrl+"posts"}getPosts(){return this.http.get(this.postApi).pipe((0,m.X)(3),(0,d.K)(this.handleError))}getPost(e){return this.http.get(`${this.postApi}/${e}`).pipe((0,m.X)(3),(0,d.K)(this.handleError))}createPost(e){return this.http.post(this.postApi,e).pipe((0,d.K)(this.handleError))}updatePost(e,i){return this.http.put(`${this.postApi}/${i}`,{title:e.get("title"),content:e.get("content"),category:e.get("category"),author_id:"1"}).pipe((0,d.K)(this.handleError))}deletePost(e){return this.http.delete(`${this.postApi}/${e}`).pipe((0,d.K)(this.handleError))}handleError(e){return 0===e.status?console.error("An error occurred:",e.error):console.error(`Backend returned code ${e.status}, body was: `,e.error),(0,b._)(()=>new Error("Something bad happened; please try again later."))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var A=r(501),f=r(9600);function P(o,s){if(1&o&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&o){const e=s.$implicit,i=t.oxw(2);t.Q6J("value",e.id)("selected",i.selectedCat===e.id&&i.editMode),t.xp6(1),t.hij(" ",e.title," ")}}function w(o,s){if(1&o&&(t.TgZ(0,"div",20)(1,"label",21),t._uU(2,"\u0641\u0626\u0629 \u0627\u0644\u0645\u0642\u0627\u0644\u0629"),t.qZA(),t.TgZ(3,"select",22),t.YNc(4,P,2,3,"option",23),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.cats.data)}}let x=(()=>{class o{constructor(e,i,a,c,p){this.formBuilder=e,this.postsService=i,this.categoriesService=a,this.location=c,this.route=p,this.isSubmited=!1,this.editMode=!1,this.postId=""}ngOnInit(){this.initForm(),this.getCats(),this.checkEditMode()}onSubmit(){if(this.isSubmited=!0,this.form.invalid)return;const e=new FormData;Object.keys(this.postForm).map(i=>{e.append(i,this.postForm[i].value)}),this.editMode?this.updatePost(e,this.postId):this.createPost(e)}getCats(){this.categoriesService.getCategories().subscribe(e=>{this.cats=e})}initForm(){this.form=this.formBuilder.group({title:["",n.kI.required],content:["",n.kI.required],category:[""],author_id:["1"]})}checkEditMode(){this.route.params.subscribe(e=>{e.id&&(this.editMode=!0,this.postId=e.id,this.postsService.getPost(this.postId).subscribe(i=>{this.postForm.title.setValue(i.data.title),this.postForm.content.setValue(i.data.content),this.postForm.category.setValue(i.data.category),this.selectedCat=i.data.category}))})}createPost(e){this.postsService.createPost(e).subscribe(i=>{this.returnBack()})}updatePost(e,i){this.postsService.updatePost(e,i).subscribe(a=>{this.returnBack()})}returnBack(){(0,v.H)(2e3).toPromise().then(()=>{this.location.back()})}get postForm(){return this.form.controls}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(n.qu),t.Y36(h),t.Y36(A.G),t.Y36(u.Ye),t.Y36(l.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-post-form"]],decls:28,vars:4,consts:[[1,"text-gray-600","body-font","relative"],[1,"container","px-1","md:px-5","py-24","mx-auto"],[1,"flex","flex-col","text-center","w-full","mb-12"],[1,"sm:text-3xl","text-2xl","font-medium","title-font","mb-4","text-gray-900"],[1,"lg:w-2/3","mx-auto","leading-relaxed","text-base"],[1,"container","px-5","mx-auto"],[1,"block","-m-2",3,"formGroup"],[1,"p-2","w-1/2"],[1,"relative"],["for","title",1,"leading-7","text-sm","text-gray-600"],["type","text","id","title","formControlName","title",1,"w-full","bg-gray-100","bg-opacity-50","rounded","border","border-gray-300","focus:border-indigo-500","focus:bg-white","focus:ring-2","focus:ring-indigo-200","text-base","outline-none","text-gray-700","py-1","px-3","leading-8","transition-colors","duration-200","ease-in-out"],[1,"p-2","w-1/2",2,"display","none"],["hidden","","type","text","id","title","formControlName","author_id",1,"w-full","bg-gray-100","bg-opacity-50","rounded","border","border-gray-300","focus:border-indigo-500","focus:bg-white","focus:ring-2","focus:ring-indigo-200","text-base","outline-none","text-gray-700","py-1","px-3","leading-8","transition-colors","duration-200","ease-in-out"],["class","p-2 w-2/3",4,"ngIf"],[1,"p-2","w-full"],[1,"relative","h-64"],["for","content",1,"leading-7","text-sm","text-gray-600"],["formControlName","content","dir","ltr"],[1,"p-2","w-full","mt-64","md:mt-32"],[1,"flex","mx-auto","text-white","bg-indigo-500","border-0","py-2","px-8","focus:outline-none","hover:bg-indigo-600","rounded","text-lg",3,"ngClass","click"],[1,"p-2","w-2/3"],["for","category",1,"leading-7","text-sm","font-medium","text-gray-700"],["id","category","formControlName","category",1,"py-1","px-3","leading-8","mt-1","block","w-full","border","border-gray-300","bg-white","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4,"\u0625\u0636\u0627\u0641\u0629 \u0645\u0642\u0627\u0644\u0629"),t.qZA(),t.TgZ(5,"p",4),t._uU(6,"\u0625\u0636\u0627\u0641\u0629 \u0645\u0642\u0627\u0644\u0629 \u0645\u0645\u064a\u0632\u0629 \u0648\u0645\u0641\u064a\u062f\u0629 "),t.qZA()(),t.TgZ(7,"div",5)(8,"form",6)(9,"div",7)(10,"div",8)(11,"label",9),t._uU(12,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0642\u0627\u0644\u0629"),t.qZA(),t._UZ(13,"input",10),t.qZA()(),t.TgZ(14,"div",11)(15,"div",8)(16,"label",9),t._uU(17,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u062f\u0648\u0631\u0629"),t.qZA(),t._UZ(18,"input",12),t.qZA()(),t.YNc(19,w,5,1,"div",13),t.TgZ(20,"div",14)(21,"div",15)(22,"label",16),t._uU(23,"\u0645\u062d\u062a\u0648\u0649 \u0627\u0644\u0645\u0642\u0627\u0644\u0629"),t.qZA(),t._UZ(24,"quill-editor",17),t.qZA()(),t.TgZ(25,"div",18)(26,"button",19),t.NdJ("click",function(){return i.onSubmit()}),t._uU(27),t.qZA()()()()()()),2&e&&(t.xp6(8),t.Q6J("formGroup",i.form),t.xp6(11),t.Q6J("ngIf",i.cats),t.xp6(7),t.Q6J("ngClass",i.editMode?"bg-indigo-500 hover:bg-indigo-600":"bg-green-500 hover:bg-green-600"),t.xp6(1),t.hij(" ",i.editMode?"\u062a\u0639\u062f\u064a\u0644":"\u0625\u0646\u0634\u0627\u0621"," "))},dependencies:[u.mk,u.sg,u.O5,n._Y,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.JL,n.sg,n.u,f.g6]}),o})();function F(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13),t.O4$(),t.TgZ(4,"svg",14),t._UZ(5,"path",15),t.qZA()(),t.kcU(),t.TgZ(6,"h2",16),t._uU(7),t.qZA()(),t.TgZ(8,"div",17),t._UZ(9,"div",18),t.TgZ(10,"a",19),t._uU(11,"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0642\u0627\u0644\u0629 "),t.O4$(),t.TgZ(12,"svg",20),t._UZ(13,"path",21),t.qZA()(),t.kcU(),t.TgZ(14,"button",22),t.NdJ("click",function(){const c=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.deletePost(c.id))}),t._uU(15," \u062d\u0630\u0641 "),t.qZA()()()()}if(2&o){const e=s.$implicit;t.xp6(7),t.hij(" ",e.title," "),t.xp6(2),t.Q6J("innerHtml",e.content,t.oJD),t.xp6(1),t.MGl("routerLink","form/",e.id,"")}}function C(o,s){if(1&o&&(t.TgZ(0,"div",8),t.YNc(1,F,16,3,"div",9),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.posts.data)}}const T=[{path:"",component:(()=>{class o{constructor(e){this.postsService=e,this.deleting=!1}ngOnInit(){this.getPosts()}getPosts(){this.postsService.getPosts().subscribe(e=>{this.posts=e,this.deleting=!1})}deletePost(e){this.deleting=!0,this.postsService.deletePost(e).subscribe(i=>{this.getPosts()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-posts"]],decls:11,vars:1,consts:[[1,"text-gray-600","body-font"],[1,"container","px-5","py-24","mx-auto"],[1,"flex","flex-col","text-center","w-full","mb-20"],[1,"text-xs","text-indigo-500","tracking-widest","font-medium","title-font","mb-1"],[1,"sm:text-3xl","text-2xl","font-medium","title-font","text-gray-900"],[1,"flex","justify-between","w-full","mb-10"],["routerLink","form",1,"ml-5","inline-flex","mx-auto","text-white","bg-indigo-500","border-0","py-2","px-8","focus:outline-none","hover:bg-indigo-600","rounded","text-lg"],["class","flex flex-wrap -m-4",4,"ngIf"],[1,"flex","flex-wrap","-m-4"],["class","p-4 md:w-1/3",4,"ngFor","ngForOf"],[1,"p-4","md:w-1/3"],[1,"flex","rounded-lg","h-full","bg-gray-100","p-8","flex-col"],[1,"flex","items-center","mb-3"],[1,"w-8","h-8","ml-3","inline-flex","items-center","justify-center","rounded-full","bg-indigo-500","text-white","flex-shrink-0"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24",1,"w-5","h-5"],["d","M22 12h-4l-3 9L9 3l-3 9H2"],[1,"text-gray-900","text-lg","title-font","font-medium"],[1,"flex-grow"],[1,"leading-relaxed","text-base","h-32","mb-5","overflow-hidden",3,"innerHtml"],[1,"mt-3","text-indigo-500","inline-flex","items-center",3,"routerLink"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24",1,"w-4","h-4","mr-2","rotate-180"],["d","M5 12h14M12 5l7 7-7 7"],[1,"mr-5","inline-flex","mx-auto","text-white","bg-red-500","border-0","py-2","px-3","focus:outline-none","hover:bg-red-600","rounded","text-lg",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"\u0627\u0644\u0645\u0642\u0627\u0644\u0627\u062a"),t.qZA(),t.TgZ(5,"h1",4),t._uU(6,"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0642\u0627\u0644\u0627\u062a \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629 \u062d\u0627\u0644\u064a\u0627 \u0641\u064a \u0642\u0627\u0639\u062f\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"),t.qZA()(),t.TgZ(7,"div",5)(8,"button",6),t._uU(9," \u0645\u0642\u0627\u0644 \u062c\u062f\u064a\u062f "),t.qZA()(),t.YNc(10,C,2,1,"div",7),t.qZA()()),2&e&&(t.xp6(10),t.Q6J("ngIf",i.posts))},dependencies:[u.sg,u.O5,l.rH,l.yS]}),o})()},{path:"form",component:x},{path:"form/:id",component:x}];let k=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.Bz.forChild(T),l.Bz]}),o})();var U=r(4466);const M={toolbar:{container:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]}],[{font:[]}],[{align:[]}]]}};let S=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,n.u5,n.UX,k,U.m,f.fi.forRoot({modules:M,placeholder:"Write an awesome post ..."})]}),o})()}}]);